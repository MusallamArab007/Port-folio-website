<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ’° Expense Tracker</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  body {
    background-color: #f8f9fa;
  }
  .card {
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border-radius: 10px;
  }
  .table td, .table th {
    vertical-align: middle;
  }
  .summary-box {
    background-color: #0d6efd;
    color: white;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    font-size: 18px;
  }
  .btn-sm {
    margin-right: 5px;
  }
</style>
</head>
<body class="p-4">

<div class="container mt-4">

  <h2 class="text-center mb-4"> Expense Tracker</h2>

  <!-- Expense Input Form -->
  <div class="card p-4 mb-4">
    <h5>Add New Expense</h5>
    <form id="expenseForm" class="row g-3 mt-2">
      <div class="col-md-4">
        <label class="form-label">Amount (â‚¹)</label>
        <input type="number" id="amount" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Category</label>
        <select id="category" class="form-select" required>
          <option value="">Select Category</option>
          <option>Food</option>
          <option>Transport</option>
          <option>Shopping</option>
          <option>Entertainment</option>
          <option>Others</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">Description</label>
        <input type="text" id="description" class="form-control" placeholder="Enter details" required>
      </div>
      <div class="col-12 text-end">
        <button type="submit" class="btn btn-primary mt-2">Add Expense</button>
      </div>
    </form>
  </div>

  <!-- Expense List -->
  <div class="card p-4 mb-4">
    <h5>Expense List</h5>
    <div class="table-responsive mt-3">
      <table class="table table-bordered table-hover" id="expenseTable">
        <thead class="table-primary">
          <tr>
            <th>#</th>
            <th>Amount (â‚¹)</th>
            <th>Category</th>
            <th>Description</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <!-- Expenses will appear here -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Summary Section -->
  <div class="summary-box">
     Total Expenses: â‚¹<span id="totalAmount">0</span>
  </div>

</div>

<!-- JavaScript -->
<script>
  // === Array to store all expenses ===
  let expenses = [];
  let editIndex = -1; // Used for editing mode

  // === Reference to DOM elements ===
  const expenseForm = document.getElementById('expenseForm');
  const amountInput = document.getElementById('amount');
  const categoryInput = document.getElementById('category');
  const descriptionInput = document.getElementById('description');
  const expenseTableBody = document.querySelector('#expenseTable tbody');
  const totalAmountSpan = document.getElementById('totalAmount');

  // === Handle Form Submission ===
  expenseForm.addEventListener('submit', function(event) {
    event.preventDefault();

    const amount = parseFloat(amountInput.value);
    const category = categoryInput.value;
    const description = descriptionInput.value.trim();

    if (!amount || !category || !description) {
      alert("Please fill out all fields!");
      return;
    }

    // Check if editing an existing record
    if (editIndex === -1) {
      // Add new expense
      const expense = { amount, category, description };
      expenses.push(expense);
    } else {
      // Update existing expense
      expenses[editIndex] = { amount, category, description };
      editIndex = -1; // Exit edit mode
    }

    // Reset form
    expenseForm.reset();

    // Update table and total
    renderExpenses();
  });

  // === Render Expenses in Table ===
  function renderExpenses() {
    expenseTableBody.innerHTML = "";

    expenses.forEach((expense, index) => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${index + 1}</td>
        <td>â‚¹${expense.amount.toFixed(2)}</td>
        <td>${expense.category}</td>
        <td>${expense.description}</td>
        <td>
          <button class="btn btn-warning btn-sm" onclick="editExpense(${index})">Edit</button>
          <button class="btn btn-danger btn-sm" onclick="deleteExpense(${index})">Delete</button>
        </td>
      `;
      expenseTableBody.appendChild(row);
    });

    updateTotal();
  }

  // === Edit Expense ===
  function editExpense(index) {
    const expense = expenses[index];
    amountInput.value = expense.amount;
    categoryInput.value = expense.category;
    descriptionInput.value = expense.description;

    editIndex = index;
  }

  // === Delete Expense ===
  function deleteExpense(index) {
    if (confirm("Are you sure you want to delete this expense?")) {
      expenses.splice(index, 1);
      renderExpenses();
    }
  }

  // === Calculate and Update Total ===
  function updateTotal() {
    const total = expenses.reduce((sum, exp) => sum + exp.amount, 0);
    totalAmountSpan.textContent = total.toFixed(2);
  }
</script>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
